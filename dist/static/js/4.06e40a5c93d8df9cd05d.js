webpackJsonp([4],{"1kS7":function(t,e){e.f=Object.getOwnPropertySymbols},Dd8w:function(t,e,n){"use strict";e.__esModule=!0;var i,a=n("woOf"),s=(i=a)&&i.__esModule?i:{default:i};e.default=s.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},NpIQ:function(t,e){e.f={}.propertyIsEnumerable},NxXQ:function(t,e,n){"use strict";var i={props:{titles:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{isActive:function(t){return{active:this.currentIndex===t}},itemClick:function(t){this.currentIndex=t,this.$emit("tabClick",t)}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-control"},t._l(t.titles,function(e,i){return n("div",{key:e,staticClass:"tab-control-item",class:t.isActive(i),on:{click:function(e){return t.itemClick(i)}}},[n("span",[t._v(t._s(e))])])}),0)},staticRenderFns:[]};var s=n("VU/8")(i,a,!1,function(t){n("cyVJ")},"data-v-2797b5b9",null);e.a=s.exports},R4wc:function(t,e,n){var i=n("kM2E");i(i.S+i.F,"Object",{assign:n("To3L")})},To3L:function(t,e,n){"use strict";var i=n("+E39"),a=n("lktj"),s=n("1kS7"),o=n("NpIQ"),r=n("sB3e"),c=n("MU5D"),l=Object.assign;t.exports=!l||n("S82l")(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=i})?function(t,e){for(var n=r(t),l=arguments.length,u=1,f=s.f,d=o.f;l>u;)for(var m,h=c(arguments[u++]),v=f?a(h).concat(f(h)):a(h),p=v.length,b=0;p>b;)m=v[b++],i&&!d.call(h,m)||(n[m]=h[m]);return n}:l},V3tA:function(t,e,n){n("R4wc"),t.exports=n("FeBl").Object.assign},VMLd:function(t,e){},bWA4:function(t,e){},cyVJ:function(t,e){},sxfo:function(t,e){},vilm:function(t,e){},woOf:function(t,e,n){t.exports={default:n("V3tA"),__esModule:!0}},zifb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),a=n.n(i),s=n("rIAJ"),o=n("ihDs"),r=n("NxXQ"),c={components:{Scroll:o.a},props:{categories:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{titleClick:function(t){this.currentIndex=t,this.$emit("selectItem",t)},isActive:function(t){return{active:t===this.currentIndex}}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu"},[n("scroll",{staticClass:"content"},t._l(t.categories,function(e,i){return n("div",{key:e.title+i,staticClass:"title",class:t.isActive(i),on:{click:function(e){return t.titleClick(i)}}},[t._v("\n      "+t._s(e.title)+"\n    ")])}),0)],1)},staticRenderFns:[]};var u=n("VU/8")(c,l,!1,function(t){n("sxfo")},"data-v-f93098a6",null).exports,f={components:{},props:{subCategoryList:{type:Array,default:function(){return[]}}},data:function(){return{counter:0}},methods:{imageLoad:function(){this.counter++,console.log("counter::"+this.counter),console.log("length::"+this.subCategoryList.length),this.counter===this.subCategoryList.length&&(console.log("imageLoad"),this.$emit("imageLoad"),this.counter=0)}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return 0!==t.subCategoryList.length?n("div",{staticClass:"menu-detail"},[t._l(t.subCategoryList,function(e,i){return n("div",{key:e.title+i,staticClass:"menu-detail-item"},[n("a",{attrs:{href:e.link}}),t._v(" "),n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"item.image"}],staticClass:"image",attrs:{alt:""},on:{load:t.imageLoad}}),t._v(" "),n("div",{staticClass:"text"},[t._v(t._s(e.title))])])}),t._v(" "),n("div",{staticClass:"menu-detail-item"}),t._v(" "),n("div",{staticClass:"menu-detail-item"})],2):t._e()},staticRenderFns:[]};var m=n("VU/8")(f,d,!1,function(t){n("bWA4")},"data-v-066d234d",null).exports,h={components:{GoodsListItem:n("5Mql").a},props:{contentDetail:{type:Array,default:function(){return[]}},isTabFixed:{type:Boolean,default:function(){return!1}}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content-detail"},this._l(this.contentDetail,function(t,n){return e("goods-list-item",{key:n,attrs:{"goods-item":t}})}),1)},staticRenderFns:[]};var p=n("VU/8")(h,v,!1,function(t){n("VMLd")},"data-v-4c6ad2c8",null).exports,b=n("f744"),g=n("0RrJ");var y={components:{NavBar:s.a,Scroll:o.a,TabControl:r.a,CategoryMenu:u,MenuDetail:m,ContentDetail:p},mixins:[b.a],data:function(){return{currentIndex:0,categories:[],maitKey:"",mk:"mk",menuDetailData:{},miniWallkey:"",mwk:"mwk",types:["pop","new","sell"],currentType:"pop",contentDetailData:{pop:{},new:{},sell:[]},isTabFixed:!1,tabOffsetTop:0,menuOffsetTop:0,tabMove:0}},computed:{showSubcategory:function(){return""===this.maitKey?[]:this.menuDetailData[this.mk+this.maitKey]},showContentDetail:function(){return""===this.miniWallkey?[]:this.contentDetailData[this.currentType][this.mwk+this.miniWallkey]}},created:function(){this._getCategory()},mounted:function(){},methods:{_getCategory:function(){var t=this;Object(g.a)({url:"/category"}).then(function(e){if(t.categories=e.data.category.list,0!==t.categories.length){var n=t.categories[t.currentIndex].maitKey;t._getsubcategory(n)}})},_getsubcategory:function(t){var e=this;this.mk+t in this.menuDetailData?this.maitKey=t:function(t){return Object(g.a)({url:"/subcategory",params:{maitKey:t}})}(t).then(function(n){e.menuDetailData[e.mk+t]=n.data.list,e.menuDetailData=a()({},e.menuDetailData),e.maitKey=t,e._getContentDetail("pop"),e._getContentDetail("new"),e._getContentDetail("sell")})},_getContentDetail:function(t){var e=this,n=this.categories[this.currentIndex].miniWallkey;this.mwk+n in this.contentDetailData[t]?this.miniWallkey=n:function(t,e){return Object(g.a)({url:"/subcategory/detail",params:{miniWallkey:t,type:e}})}(n,t).then(function(i){e.contentDetailData[t][e.mwk+n]=i,e.contentDetailData=a()({},e.contentDetailData),e.miniWallkey=n})},selectItem:function(t){this.currentIndex=t;var e=this.categories[t].maitKey;this._getsubcategory(e),this.$refs.scroll.refresh(),this.$refs.scroll.scrollTo(0,0,0)},scroll:function(t){this.isShowBackTop=-t.y>1e3,this.isTabFixed=-t.y>this.tabMove},menuImageLoad:function(){this.tabOffsetTop=this.$refs.tabControl.$el.offsetTop,this.menuOffsetTop=this.$refs.menu.$el.offsetTop,this.tabMove=this.tabOffsetTop-this.menuOffsetTop,console.log(this.tabOffsetTop),console.log(this.menuOffsetTop),console.log(this.tabMove)},tabClick:function(t){this.$refs.tabControl.currentIndex=t,this.$refs.tabControlFixed.currentIndex=t,this.currentType=this.types[t],this._getContentDetail(this.currentType)}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"category-wrapper"},[n("nav-bar",{staticClass:"cate-nav"},[n("div",{attrs:{slot:"center"},slot:"center"},[t._v("商品分类")])]),t._v(" "),n("div",{staticClass:"content"},[n("category-menu",{attrs:{categories:t.categories},on:{selectItem:t.selectItem}}),t._v(" "),n("div",{staticClass:"scroll-wrap"},[n("tab-control",{directives:[{name:"show",rawName:"v-show",value:t.isTabFixed,expression:"isTabFixed"}],ref:"tabControlFixed",staticClass:"tab-control-fixed",attrs:{titles:["综合","新品","销量"]},on:{tabClick:t.tabClick}}),t._v(" "),n("scroll",{ref:"scroll",staticClass:"scroll",attrs:{"probe-type":3},on:{scroll:t.scroll}},[n("menu-detail",{ref:"menu",attrs:{"sub-category-list":t.showSubcategory},on:{imageLoad:t.menuImageLoad}}),t._v(" "),n("tab-control",{directives:[{name:"show",rawName:"v-show",value:!t.isTabFixed,expression:"!isTabFixed"}],ref:"tabControl",attrs:{titles:["综合","新品","销量"]},on:{tabClick:t.tabClick}}),t._v(" "),n("content-detail",{attrs:{"content-detail":t.showContentDetail}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isTabFixed,expression:"isTabFixed"}],staticClass:"tab-h"})],1)],1)],1),t._v(" "),n("back-top",{directives:[{name:"show",rawName:"v-show",value:t.isShowBackTop,expression:"isShowBackTop"}],nativeOn:{click:function(e){return t.backTop.apply(null,arguments)}}})],1)},staticRenderFns:[]};var _=n("VU/8")(y,C,!1,function(t){n("vilm")},"data-v-1a882826",null);e.default=_.exports}});
//# sourceMappingURL=4.06e40a5c93d8df9cd05d.js.map